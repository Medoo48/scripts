# Що таке s
* `s` - скрипт для перекладу іншомовного тексту українською

Назва від sync, синхронізація перекладу)

# Як встановити

### Встановіть середовище для виконання скрипта та його залежності на вашу операційну систему
GNU/Linux та MacOS вже мають потрібне середовище, встановіть залежності(`python deepl-cli`) скориставшись пакетним менеджером вашої операційної системи:
  - ArchLinux: `sudo pacman -S python python-pipx`. `python-pipx` потрібен щоб встановити `deepl-cli`, і лише для ArchLinux, для інших ОС використовуйте `python-pip`
  - Встановіть `deepl-cli` скориставшись `pip`(`pipx` лише для ArchLinux): `pipx install deepl-cli`

Windows: Встановіть середовище [MSYS2](https://www.msys2.org/) виконуючи 1-5 кроки з наведеної на сайті інструкції.
  - Встановіть залежності скрипта: `pacman -S python python-pip`
  - Встановіть `deepl-cli` скориставшись `pip`: `pip install deepl-cli`

У випадку з Windows скрипт потрібно виконувати не у звичайному терміналі, а в тому що постачає msys2

# Як використовувати

Взаємодія зі скриптом відбувається через передачу йому параметрів. Наприклад, `s -c 1 -r -S 90 файл1 файл2 файл3 ...` - виконає послідовний переклад по одному файлу, зачекає 90 секунд перед перекладом наступного щоб запобігти бану. Переклад записується як `[ім'я файлу].tr.txt`(можна змінити).

Файли які плануєте перекладати треба завчасно поділити по `1500` символів (обмеження `DeepL` для користувачів без облікового запису) використовуючи програму [fix](https://github.com/Medoo48/scripts/blob/main/fix_usage.md), з параметрами `-n 1500 -T файли`

Скрипт зберігає результат своєї роботи у теці де він виконується, не перезаписуючи наявні файли перекладу.

Якщо якийсь файл не містить перекладу(у терміналі буде написано `failed [ім'я файлу]...`) - перезапустіть скрипт.

Рекомендую виконувати скрипт з наведеними вище параметрами(`s -c 1 -r -S 90`), це дозволить менше потрапляти у бан DeepL.

Рекомендація: якщо потрапили у бан(у терміналі послідовні `failed`) - зачекайте 30-60 хвилин, зменште `-c` до `1`, якщо не допомагає зачекайте декілька годин й збільште `-S`.

Приклад роботи:
```
@> s -c 1 -r -S 90 $(ls | sort -n)
running
failed [1182] at [20:17 2024-03-31]
sleep 90 seconds [20:17 2024-03-31], [done 92] [1 failed] [1818 total]
```

Без параметрів зʼявиться пояснення які параметри доступні у скрипті: 
```
usege: s [-rh] [-c count] [-s delay] [-S dalay_after] files
        -c, --count     Перекласти вказану кількість файлів. З -r скрипт перекладатиме вказаними порціями
        -r, --repeat    Перекласти порцію файлів, почекати 120с(змінити через -S) щоб запобігти бану й перейти до наступної порції. Якщо кількість файлів не вказана використовується 2 за замовчуванням
        -s, --sleep     Засинати на вказану кількість секунд після перекладу файлу. 5с за замовчуванням
        -S, --sleep-after       Засинати на вказану кількість секунд після перекладу порції файлів. 120с за замовчуванням
        -t, --timeout   Скільки чекати на результат перекладу. 60 секунд за замовчуванням
        -h, --help      Показати цю довідку і завершити роботу
```

# Детальне пояснення параметрів
- `-c`, `--count` - яку кількість файлів треба перекласти(не залежно від отриманої кількості). Рекомендую використовувати з `-r`, щоб зменшити можливість отримання бану.
- `-r`, `--repeat` - перекладати файли невеликими порціями(задається через `-c`) і почекати декілька секунд після кожної щоб зменшити можливість отримання бану. Якщо використовується без `-c` встановить кількість як 2.
- `-s`, `--sleep` - вказує час який скрипт буде чекати після перекладу файлу. 5 за замовчуванням.
- `-S`, `--sleep-after` - вказує час який скрипт буде чекати після перекладу порції файлів. 120 за замовчуванням.
- `-t`, `--timeout` - Переклад не відбувається миттєво, тому його треба очікувати. 60 секунд очікування за замовчуванням
- `-h`, `--help` - Показати довідку і завершити роботу

# Що не варто робити
- `-c` більше 2-3 з параметром `-r`. Бо швидко потрапите у бан.
- дуже мале значення `-s`, `-S` та `-t`. Бо швидко потрапите у бан.
